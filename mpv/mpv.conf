######################################################################
# mpv player 配置文件
# 系统: windows 11
# 显卡: GTX 1650
# CPU: i5 9600KF
# 内存: 16GB
# 显示器: 惠普 HP27mq 2560x1440 --显示器不支持HDR
######################################################################

######################################################################
# 基础视频输出设置
######################################################################
vo=gpu-next                     # 使用GPU进行视频渲染
gpu-api=d3d11                   # d3d11 | vulkan | auto
gpu-context=auto                # 设置GPU上下文为Windows

######################################################################
# 画质提升与缩放算法
######################################################################
scale=ewa_lanczossharp         # 视频主缩放算法，提升清晰度
cscale=ewa_lanczossharp        # 色度缩放算法
dscale=ewa_lanczossharp        # 下采样缩放算法
tscale=oversample              # 时间缩放算法（帧插值时用）
sigmoid-upscaling=yes          # 提升缩放锐度，抑制锯齿

######################################################################
# 色彩管理与显示校准
######################################################################
icc-profile-auto=no            # 禁用自动加载 ICC 配置文件(惠普 HP27mq 无出厂校准的 ICC 文件)

######################################################################
# 解码设置
######################################################################
hwdec=nvdec-copy               # 对部分老旧 HEVC/VP9 视频, 比auto兼容性好
hwdec-codecs=h264,hevc,vp9     # 指定支持硬解的编码（注：GTX 1650不支持AV1硬解）

######################################################################
# 画质增强参数
######################################################################
deband=yes                     # 启用去色带处理，减少色彩断层
deband-iterations=2            # 去色带迭代次数
deband-threshold=16            # 去色带阈值，数值越小保留细节越多
deband-range=12                # 去色带范围
deband-grain=8                 # 去色带后补偿噪点，保留质感
correct-downscaling=yes        # 启用高质量下采样

######################################################################
# 播放性能与同步
######################################################################
framedrop=vo                   # 丢帧策略，优先保证画面流畅
video-sync=display-resample    # 视频同步到显示器刷新率，提升流畅度
interpolation=yes              # 启用帧插值，提升低帧率视频流畅度

######################################################################
# 渲染精度与抖动
######################################################################
dither=fruit                   # 抖动算法，提升色彩过渡
dither-depth=auto              # 自动选择抖动色深
fbo-format=rgba16f             # 高精度渲染缓冲格式
swapchain-depth=3              # 帧缓冲队列深度

######################################################################
# 文件缓存与读取优化
######################################################################
cache=yes                      # 启用文件缓存
demuxer-max-bytes=1GiB         # 最大解复用缓存大小
cache-secs=120                 # 缓存秒数

######################################################################
# 音频相关设置
######################################################################
audio-channels=stereo          # 强制立体声输出
audio-device=auto              # 自动适配当前默认音频设备, 兼容性更好
audio-normalize-downmix=yes    # 多声道混音后音量归一化
audio-buffer=0.2              # 音频缓冲区大小
volume-max=200                 # 最大音量限制（可达200%）

######################################################################
# 字幕相关设置
######################################################################
sub-auto=fuzzy                 # 自动加载匹配的字幕文件
sub-font="Microsoft YaHei"     # 字体设置为微软雅黑
sub-font-size=32               # 字幕字号
sub-color="#FFFFFF"          # 字幕字体颜色
sub-border-color="#000000"   # 字幕边框颜色
sub-border-size=2.0            # 字幕边框宽度
sub-shadow-offset=1.0          # 字幕阴影偏移
sub-blur=0                     # 字幕模糊度
sub-outline-size=2.0           # 字幕轮廓宽度

######################################################################
# 显示与画面比例相关
######################################################################
keepaspect=yes                 # 保持视频原始宽高比
autofit-larger=100%x100%       # 自动填满屏幕

######################################################################
# 界面与操作相关
######################################################################
osc=no                         # 关闭浮动控制栏
border=yes                     # 窗口显示边框
title=${media-title}           # 窗口标题显示媒体名称
keep-open=yes                  # 播放完成后窗口保持打开
idle=yes                       # 无媒体时保持空闲
save-position-on-quit=yes      # 退出时保存播放位置
resume-playback=yes            # 下次自动恢复播放位置
watch-later-directory=~~/watch_later/ # watch later 文件夹
watch-later-options=volume,speed,sub-pos,sub-scale,sub-delay,audio-delay,brightness,contrast,saturation,gamma,hue,start # watch later 参数
watch-later-options-remove=pause # watch later 自动移除暂停状态

######################################################################
# 语言优先级
######################################################################
alang=en,eng,zh,zh-hans,chs,sc # 音频语言优先级
slang=zh,zh-hans,chs,sc,en,eng # 字幕语言优先级

######################################################################
# 其它优化与辅助功能
######################################################################
stop-screensaver=yes           # 播放时阻止屏保
no-input-builtin-bindings      # 禁用默认快捷键绑定
cursor-autohide=500           # 鼠标无操作后自动隐藏的时(毫秒)

######################################################################
# 截图与日志
######################################################################
screenshot-format=png          # 截图格式为PNG
screenshot-high-bit-depth=yes  # 启用高色深截图
screenshot-directory=C:\Users\feng\Pictures\mpv
log-file=~~/logs/mpv.log        # 日志文件路径
msg-level=all=warn,error=v     # 日志输出等级
